/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { from } from 'rxjs';
import { init } from 'filestack-js';
import * as i0 from "@angular/core";
var FilestackService = /** @class */ (function () {
    function FilestackService() {
    }
    Object.defineProperty(FilestackService.prototype, "client", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            if (!this.clientInstance) {
                throw new Error('FilestackService: client does not exist. Please initialize service via init method.');
            }
            return this.clientInstance;
        },
        set: /**
         * @private
         * @param {?} client
         * @return {?}
         */
        function (client) {
            this.clientInstance = client;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Set another client instance as this one used by FilestackService
     * @param client - An instance of filestack client class
     */
    /**
     * Set another client instance as this one used by FilestackService
     * @param {?} client - An instance of filestack client class
     * @return {?}
     */
    FilestackService.prototype.setClientInstance = /**
     * Set another client instance as this one used by FilestackService
     * @param {?} client - An instance of filestack client class
     * @return {?}
     */
    function (client) {
        if (client) {
            this.client = client;
        }
    };
    /**
     * Initialize filestack client
     * @param apikey - Filestack apikey
     * @param clientOptions - Client options
     */
    /**
     * Initialize filestack client
     * @param {?} apikey - Filestack apikey
     * @param {?=} clientOptions - Client options
     * @return {?}
     */
    FilestackService.prototype.init = /**
     * Initialize filestack client
     * @param {?} apikey - Filestack apikey
     * @param {?=} clientOptions - Client options
     * @return {?}
     */
    function (apikey, clientOptions) {
        this.client = init(apikey, clientOptions);
    };
    /**
     * Instance of picker class
     * @param options - picker options
     */
    /**
     * Instance of picker class
     * @param {?=} options - picker options
     * @return {?}
     */
    FilestackService.prototype.picker = /**
     * Instance of picker class
     * @param {?=} options - picker options
     * @return {?}
     */
    function (options) {
        return this.client.picker(options);
    };
    /**
     * Generate url with filestack transformations
     * @param url - Filestack handle or external url
     * @param options - Transformation options
     * @param b64 - Encode url params in base64
     */
    /**
     * Generate url with filestack transformations
     * @param {?} url - Filestack handle or external url
     * @param {?} options - Transformation options
     * @param {?=} b64 - Encode url params in base64
     * @return {?}
     */
    FilestackService.prototype.transform = /**
     * Generate url with filestack transformations
     * @param {?} url - Filestack handle or external url
     * @param {?} options - Transformation options
     * @param {?=} b64 - Encode url params in base64
     * @return {?}
     */
    function (url, options, b64) {
        return this.client.transform(url, options, b64);
    };
    /**
     * Access files via their Filestack handles
     * @param handle - Filestack handle
     * @param options - Retrieve options
     * @param security - Filestack security object
     */
    /**
     * Access files via their Filestack handles
     * @param {?} handle - Filestack handle
     * @param {?=} options - Retrieve options
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    FilestackService.prototype.retrieve = /**
     * Access files via their Filestack handles
     * @param {?} handle - Filestack handle
     * @param {?=} options - Retrieve options
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    function (handle, options, security) {
        return from(this.client.retrieve(handle, options, security));
    };
    /**
     * Retrieve detailed data of stored files
     * @param handle - Filestack handle
     * @param options - Metadata options
     * @param security - Filestack security object
     */
    /**
     * Retrieve detailed data of stored files
     * @param {?} handle - Filestack handle
     * @param {?=} options - Metadata options
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    FilestackService.prototype.metadata = /**
     * Retrieve detailed data of stored files
     * @param {?} handle - Filestack handle
     * @param {?=} options - Metadata options
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    function (handle, options, security) {
        return from(this.client.metadata(handle, options, security));
    };
    /**
     * Store a file from its URL
     * @param url - Valid url to file
     * @param options - Store params
     * @param token - Optional control token to call .cancel()
     * @param security - Filestack security object
     */
    /**
     * Store a file from its URL
     * @param {?} url - Valid url to file
     * @param {?=} options - Store params
     * @param {?=} token - Optional control token to call .cancel()
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    FilestackService.prototype.storeURL = /**
     * Store a file from its URL
     * @param {?} url - Valid url to file
     * @param {?=} options - Store params
     * @param {?=} token - Optional control token to call .cancel()
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    function (url, options, token, security) {
        return from(this.client.storeURL(url, options, token, security));
    };
    /**
     * Upload a provided file
     * @param file - A file to upload
     * @param options - Upload options
     * @param storeOptions - Store options
     * @param token - Optional control token to call .cancel()
     * @param security - Filestack security object
     */
    /**
     * Upload a provided file
     * @param {?} file - A file to upload
     * @param {?=} options - Upload options
     * @param {?=} storeOptions - Store options
     * @param {?=} token - Optional control token to call .cancel()
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    FilestackService.prototype.upload = /**
     * Upload a provided file
     * @param {?} file - A file to upload
     * @param {?=} options - Upload options
     * @param {?=} storeOptions - Store options
     * @param {?=} token - Optional control token to call .cancel()
     * @param {?=} security - Filestack security object
     * @return {?}
     */
    function (file, options, storeOptions, token, security) {
        return from(this.client.upload(file, options, storeOptions, token, security));
    };
    /**
     * Remove a file from storage and the Filestack system
     * @param handle - Filestack handle
     * @param security - Filestack security object
     */
    /**
     * Remove a file from storage and the Filestack system
     * @param {?} handle - Filestack handle
     * @param {?} security - Filestack security object
     * @return {?}
     */
    FilestackService.prototype.remove = /**
     * Remove a file from storage and the Filestack system
     * @param {?} handle - Filestack handle
     * @param {?} security - Filestack security object
     * @return {?}
     */
    function (handle, security) {
        return from(this.client.remove(handle, security));
    };
    /**
     * Remove a file only from the Filestack system. The file remains in storage
     * @param handle - Filestack handle
     * @param security - Filestack security object
     */
    /**
     * Remove a file only from the Filestack system. The file remains in storage
     * @param {?} handle - Filestack handle
     * @param {?} security - Filestack security object
     * @return {?}
     */
    FilestackService.prototype.removeMetadata = /**
     * Remove a file only from the Filestack system. The file remains in storage
     * @param {?} handle - Filestack handle
     * @param {?} security - Filestack security object
     * @return {?}
     */
    function (handle, security) {
        return from(this.client.removeMetadata(handle, security));
    };
    /**
     * Used for viewing files via Filestack handles or storage aliases
     * @param handle - Filestack handle
     * @param options - Preview options
     */
    /**
     * Used for viewing files via Filestack handles or storage aliases
     * @param {?} handle - Filestack handle
     * @param {?=} options - Preview options
     * @return {?}
     */
    FilestackService.prototype.preview = /**
     * Used for viewing files via Filestack handles or storage aliases
     * @param {?} handle - Filestack handle
     * @param {?=} options - Preview options
     * @return {?}
     */
    function (handle, options) {
        return this.client.preview(handle, options);
    };
    /**
     * Clear all current cloud sessions in the picker or
     * particular one if name is passed
     * @param name - Optional cloud name to be passed
     */
    /**
     * Clear all current cloud sessions in the picker or
     * particular one if name is passed
     * @param {?=} name - Optional cloud name to be passed
     * @return {?}
     */
    FilestackService.prototype.logout = /**
     * Clear all current cloud sessions in the picker or
     * particular one if name is passed
     * @param {?=} name - Optional cloud name to be passed
     * @return {?}
     */
    function (name) {
        return from(this.client.logout(name));
    };
    FilestackService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */ FilestackService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function FilestackService_Factory() { return new FilestackService(); }, token: FilestackService, providedIn: "root" });
    return FilestackService;
}());
export { FilestackService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    FilestackService.prototype.clientInstance;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZXN0YWNrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZmlsZXN0YWNrL2FuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvZmlsZXN0YWNrLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUNMLElBQUksRUFFTCxNQUFNLE1BQU0sQ0FBQztBQUNkLE9BQU8sRUFjTCxJQUFJLEVBQ0osTUFBTSxjQUFjLENBQUM7O0FBRXZCO0lBQUE7S0EwSUM7SUFuSUMsc0JBQVksb0NBQU07Ozs7O1FBQWxCO1lBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQ3hCLE1BQU0sSUFBSSxLQUFLLENBQUMscUZBQXFGLENBQUMsQ0FBQzthQUN4RztZQUNELE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUM3QixDQUFDOzs7Ozs7UUFFRCxVQUFtQixNQUFjO1lBQy9CLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO1FBQy9CLENBQUM7OztPQUpBO0lBTUQ7OztPQUdHOzs7Ozs7SUFDSCw0Q0FBaUI7Ozs7O0lBQWpCLFVBQWtCLE1BQWM7UUFDOUIsSUFBSSxNQUFNLEVBQUU7WUFDVixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztTQUN0QjtJQUNILENBQUM7SUFFRDs7OztPQUlHOzs7Ozs7O0lBQ0gsK0JBQUk7Ozs7OztJQUFKLFVBQUssTUFBYyxFQUFFLGFBQTZCO1FBQ2hELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCxpQ0FBTTs7Ozs7SUFBTixVQUFPLE9BQXVCO1FBQzVCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVEOzs7OztPQUtHOzs7Ozs7OztJQUNILG9DQUFTOzs7Ozs7O0lBQVQsVUFBVSxHQUFzQixFQUFFLE9BQXlCLEVBQUUsR0FBYTtRQUN4RSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVEOzs7OztPQUtHOzs7Ozs7OztJQUNILG1DQUFROzs7Ozs7O0lBQVIsVUFBUyxNQUFjLEVBQUUsT0FBeUIsRUFBRSxRQUFtQjtRQUNyRSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVEOzs7OztPQUtHOzs7Ozs7OztJQUNILG1DQUFROzs7Ozs7O0lBQVIsVUFBUyxNQUFjLEVBQUUsT0FBeUIsRUFBRSxRQUFtQjtRQUNyRSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVEOzs7Ozs7T0FNRzs7Ozs7Ozs7O0lBQ0gsbUNBQVE7Ozs7Ozs7O0lBQVIsVUFBUyxHQUFXLEVBQUUsT0FBcUIsRUFBRSxLQUFjLEVBQUUsUUFBbUI7UUFDOUUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRzs7Ozs7Ozs7OztJQUNILGlDQUFNOzs7Ozs7Ozs7SUFBTixVQUNFLElBQWUsRUFDZixPQUF1QixFQUN2QixZQUFpQyxFQUNqQyxLQUFjLEVBQUUsUUFBbUI7UUFFbkMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDaEYsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCxpQ0FBTTs7Ozs7O0lBQU4sVUFBTyxNQUFjLEVBQUUsUUFBa0I7UUFDdkMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCx5Q0FBYzs7Ozs7O0lBQWQsVUFBZSxNQUFjLEVBQUUsUUFBa0I7UUFDL0MsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCxrQ0FBTzs7Ozs7O0lBQVAsVUFBUSxNQUFjLEVBQUUsT0FBd0I7UUFDOUMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCxpQ0FBTTs7Ozs7O0lBQU4sVUFBTyxJQUFhO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDeEMsQ0FBQzs7Z0JBeklGLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7OzsyQkF4QkQ7Q0FnS0MsQUExSUQsSUEwSUM7U0F0SVksZ0JBQWdCOzs7Ozs7SUFDM0IsMENBQStCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgZnJvbSxcbiAgT2JzZXJ2YWJsZVxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7XG4gIFBpY2tlck9wdGlvbnMsXG4gIFBpY2tlckluc3RhbmNlLFxuICBTdG9yZVBhcmFtcyxcbiAgVHJhbnNmb3JtT3B0aW9ucyxcbiAgSW5wdXRGaWxlLFxuICBSZXRyaWV2ZU9wdGlvbnMsXG4gIE1ldGFkYXRhT3B0aW9ucyxcbiAgU2VjdXJpdHksXG4gIFVwbG9hZE9wdGlvbnMsXG4gIFN0b3JlVXBsb2FkT3B0aW9ucyxcbiAgUHJldmlld09wdGlvbnMsXG4gIENsaWVudE9wdGlvbnMsXG4gIENsaWVudCxcbiAgaW5pdFxuIH0gZnJvbSAnZmlsZXN0YWNrLWpzJztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5cbmV4cG9ydCBjbGFzcyBGaWxlc3RhY2tTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjbGllbnRJbnN0YW5jZTogQ2xpZW50O1xuXG4gIHByaXZhdGUgZ2V0IGNsaWVudCgpOiBDbGllbnQge1xuICAgIGlmICghdGhpcy5jbGllbnRJbnN0YW5jZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlc3RhY2tTZXJ2aWNlOiBjbGllbnQgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBpbml0aWFsaXplIHNlcnZpY2UgdmlhIGluaXQgbWV0aG9kLicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jbGllbnRJbnN0YW5jZTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0IGNsaWVudChjbGllbnQ6IENsaWVudCkge1xuICAgIHRoaXMuY2xpZW50SW5zdGFuY2UgPSBjbGllbnQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFub3RoZXIgY2xpZW50IGluc3RhbmNlIGFzIHRoaXMgb25lIHVzZWQgYnkgRmlsZXN0YWNrU2VydmljZVxuICAgKiBAcGFyYW0gY2xpZW50IC0gQW4gaW5zdGFuY2Ugb2YgZmlsZXN0YWNrIGNsaWVudCBjbGFzc1xuICAgKi9cbiAgc2V0Q2xpZW50SW5zdGFuY2UoY2xpZW50OiBDbGllbnQpIHtcbiAgICBpZiAoY2xpZW50KSB7XG4gICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBmaWxlc3RhY2sgY2xpZW50XG4gICAqIEBwYXJhbSBhcGlrZXkgLSBGaWxlc3RhY2sgYXBpa2V5XG4gICAqIEBwYXJhbSBjbGllbnRPcHRpb25zIC0gQ2xpZW50IG9wdGlvbnNcbiAgICovXG4gIGluaXQoYXBpa2V5OiBzdHJpbmcsIGNsaWVudE9wdGlvbnM/OiBDbGllbnRPcHRpb25zKTogdm9pZCB7XG4gICAgdGhpcy5jbGllbnQgPSBpbml0KGFwaWtleSwgY2xpZW50T3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogSW5zdGFuY2Ugb2YgcGlja2VyIGNsYXNzXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gcGlja2VyIG9wdGlvbnNcbiAgICovXG4gIHBpY2tlcihvcHRpb25zPzogUGlja2VyT3B0aW9ucyk6IFBpY2tlckluc3RhbmNlIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnQucGlja2VyKG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHVybCB3aXRoIGZpbGVzdGFjayB0cmFuc2Zvcm1hdGlvbnNcbiAgICogQHBhcmFtIHVybCAtIEZpbGVzdGFjayBoYW5kbGUgb3IgZXh0ZXJuYWwgdXJsXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gVHJhbnNmb3JtYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0gYjY0IC0gRW5jb2RlIHVybCBwYXJhbXMgaW4gYmFzZTY0XG4gICAqL1xuICB0cmFuc2Zvcm0odXJsOiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9uczogVHJhbnNmb3JtT3B0aW9ucywgYjY0PzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LnRyYW5zZm9ybSh1cmwsIG9wdGlvbnMsIGI2NCk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXNzIGZpbGVzIHZpYSB0aGVpciBGaWxlc3RhY2sgaGFuZGxlc1xuICAgKiBAcGFyYW0gaGFuZGxlIC0gRmlsZXN0YWNrIGhhbmRsZVxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFJldHJpZXZlIG9wdGlvbnNcbiAgICogQHBhcmFtIHNlY3VyaXR5IC0gRmlsZXN0YWNrIHNlY3VyaXR5IG9iamVjdFxuICAgKi9cbiAgcmV0cmlldmUoaGFuZGxlOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXRyaWV2ZU9wdGlvbnMsIHNlY3VyaXR5PzogU2VjdXJpdHkpOiBPYnNlcnZhYmxlPG9iamVjdCB8IEJsb2I+IHtcbiAgICByZXR1cm4gZnJvbSh0aGlzLmNsaWVudC5yZXRyaWV2ZShoYW5kbGUsIG9wdGlvbnMsIHNlY3VyaXR5KSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgZGV0YWlsZWQgZGF0YSBvZiBzdG9yZWQgZmlsZXNcbiAgICogQHBhcmFtIGhhbmRsZSAtIEZpbGVzdGFjayBoYW5kbGVcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBNZXRhZGF0YSBvcHRpb25zXG4gICAqIEBwYXJhbSBzZWN1cml0eSAtIEZpbGVzdGFjayBzZWN1cml0eSBvYmplY3RcbiAgICovXG4gIG1ldGFkYXRhKGhhbmRsZTogc3RyaW5nLCBvcHRpb25zPzogTWV0YWRhdGFPcHRpb25zLCBzZWN1cml0eT86IFNlY3VyaXR5KTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICByZXR1cm4gZnJvbSh0aGlzLmNsaWVudC5tZXRhZGF0YShoYW5kbGUsIG9wdGlvbnMsIHNlY3VyaXR5KSk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcmUgYSBmaWxlIGZyb20gaXRzIFVSTFxuICAgKiBAcGFyYW0gdXJsIC0gVmFsaWQgdXJsIHRvIGZpbGVcbiAgICogQHBhcmFtIG9wdGlvbnMgLSBTdG9yZSBwYXJhbXNcbiAgICogQHBhcmFtIHRva2VuIC0gT3B0aW9uYWwgY29udHJvbCB0b2tlbiB0byBjYWxsIC5jYW5jZWwoKVxuICAgKiBAcGFyYW0gc2VjdXJpdHkgLSBGaWxlc3RhY2sgc2VjdXJpdHkgb2JqZWN0XG4gICAqL1xuICBzdG9yZVVSTCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFN0b3JlUGFyYW1zLCB0b2tlbj86IHN0cmluZywgc2VjdXJpdHk/OiBTZWN1cml0eSk6IE9ic2VydmFibGU8b2JqZWN0PiB7XG4gICAgcmV0dXJuIGZyb20odGhpcy5jbGllbnQuc3RvcmVVUkwodXJsLCBvcHRpb25zLCB0b2tlbiwgc2VjdXJpdHkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGxvYWQgYSBwcm92aWRlZCBmaWxlXG4gICAqIEBwYXJhbSBmaWxlIC0gQSBmaWxlIHRvIHVwbG9hZFxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFVwbG9hZCBvcHRpb25zXG4gICAqIEBwYXJhbSBzdG9yZU9wdGlvbnMgLSBTdG9yZSBvcHRpb25zXG4gICAqIEBwYXJhbSB0b2tlbiAtIE9wdGlvbmFsIGNvbnRyb2wgdG9rZW4gdG8gY2FsbCAuY2FuY2VsKClcbiAgICogQHBhcmFtIHNlY3VyaXR5IC0gRmlsZXN0YWNrIHNlY3VyaXR5IG9iamVjdFxuICAgKi9cbiAgdXBsb2FkKFxuICAgIGZpbGU6IElucHV0RmlsZSxcbiAgICBvcHRpb25zPzogVXBsb2FkT3B0aW9ucyxcbiAgICBzdG9yZU9wdGlvbnM/OiBTdG9yZVVwbG9hZE9wdGlvbnMsXG4gICAgdG9rZW4/OiBzdHJpbmcsIHNlY3VyaXR5PzogU2VjdXJpdHlcbiAgKTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICByZXR1cm4gZnJvbSh0aGlzLmNsaWVudC51cGxvYWQoZmlsZSwgb3B0aW9ucywgc3RvcmVPcHRpb25zLCB0b2tlbiwgc2VjdXJpdHkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmaWxlIGZyb20gc3RvcmFnZSBhbmQgdGhlIEZpbGVzdGFjayBzeXN0ZW1cbiAgICogQHBhcmFtIGhhbmRsZSAtIEZpbGVzdGFjayBoYW5kbGVcbiAgICogQHBhcmFtIHNlY3VyaXR5IC0gRmlsZXN0YWNrIHNlY3VyaXR5IG9iamVjdFxuICAgKi9cbiAgcmVtb3ZlKGhhbmRsZTogc3RyaW5nLCBzZWN1cml0eTogU2VjdXJpdHkpOiBPYnNlcnZhYmxlPG9iamVjdD4ge1xuICAgIHJldHVybiBmcm9tKHRoaXMuY2xpZW50LnJlbW92ZShoYW5kbGUsIHNlY3VyaXR5KSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgZmlsZSBvbmx5IGZyb20gdGhlIEZpbGVzdGFjayBzeXN0ZW0uIFRoZSBmaWxlIHJlbWFpbnMgaW4gc3RvcmFnZVxuICAgKiBAcGFyYW0gaGFuZGxlIC0gRmlsZXN0YWNrIGhhbmRsZVxuICAgKiBAcGFyYW0gc2VjdXJpdHkgLSBGaWxlc3RhY2sgc2VjdXJpdHkgb2JqZWN0XG4gICAqL1xuICByZW1vdmVNZXRhZGF0YShoYW5kbGU6IHN0cmluZywgc2VjdXJpdHk6IFNlY3VyaXR5KTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICByZXR1cm4gZnJvbSh0aGlzLmNsaWVudC5yZW1vdmVNZXRhZGF0YShoYW5kbGUsIHNlY3VyaXR5KSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBmb3Igdmlld2luZyBmaWxlcyB2aWEgRmlsZXN0YWNrIGhhbmRsZXMgb3Igc3RvcmFnZSBhbGlhc2VzXG4gICAqIEBwYXJhbSBoYW5kbGUgLSBGaWxlc3RhY2sgaGFuZGxlXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUHJldmlldyBvcHRpb25zXG4gICAqL1xuICBwcmV2aWV3KGhhbmRsZTogc3RyaW5nLCBvcHRpb25zPzogUHJldmlld09wdGlvbnMpOiBIVE1MSUZyYW1lRWxlbWVudCB8IFdpbmRvdyB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LnByZXZpZXcoaGFuZGxlLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgY3VycmVudCBjbG91ZCBzZXNzaW9ucyBpbiB0aGUgcGlja2VyIG9yXG4gICAqIHBhcnRpY3VsYXIgb25lIGlmIG5hbWUgaXMgcGFzc2VkXG4gICAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgY2xvdWQgbmFtZSB0byBiZSBwYXNzZWRcbiAgICovXG4gIGxvZ291dChuYW1lPzogc3RyaW5nKTogT2JzZXJ2YWJsZTxvYmplY3Q+IHtcbiAgICByZXR1cm4gZnJvbSh0aGlzLmNsaWVudC5sb2dvdXQobmFtZSkpO1xuICB9XG59XG4iXX0=